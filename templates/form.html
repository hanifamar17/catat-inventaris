{% extends "base.html" %}

{% block content %}
<style>
    /* Header style: gray text, not bold */
    table.dataTable thead th {
        background-color: #f9fafb;
        /* Tailwind's gray-50 */
        color: #6b7280 !important;
        /* Tailwind's gray-500 */
        font-weight: 400 !important;
        /* Normal, not bold */
        font-size: 0.875rem !important;
        /* text-sm */
        padding: 6px 8px !important;
        white-space: nowrap;
    }

    /* Table body cell style */
    table.dataTable tbody td {
        font-size: 0.875rem !important;
        /* text-sm */
        padding: 4px 8px !important;
        white-space: nowrap;
        vertical-align: middle;
    }

    /* Full width and auto layout */
    table.dataTable {
        width: 100% !important;
        table-layout: auto;
    }

    /* Align details icon center if responsive collapse is used */
    table.dataTable.dtr-inline.collapsed>tbody>tr>td:first-child:before {
        top: 50%;
        transform: translateY(-50%);
    }
</style>

<section class="w-full text-gray-800 text">
    <div class="flex flex-col md:flex-row gap-4 md:gap-8 space-y-6">
        <div class="w-full md:w-1/3 space-y-6">
            <div class="space-y-6 p-6">
                <div class="text-center md:text-left space-y-2">
                    <h2 class="text-xl font-medium text-gray-800 capitalize">{{ tipe }} Form</h2>
                    <p class="text-gray-500 text-sm">Make sure everythingâ€™s filled out correctly</p>
                </div>

                <form method="POST" class="space-y-4">
                    <div class="space-y-2">
                        <div class="mb-1">
                            <label class="block text-sm font-bold text-gray-700">Date</label>
                            <label class="block text-sm text-gray-700 mt-2">Pick a date or I'll default to
                                today</label>
                        </div>
                        <input type="date" name="date" value="{{ today }}" required
                            class="w-full p-3 text-sm border border-gray-200 rounded bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300">
                    </div>

                    <div class="space-y-2">
                        <div class="mb-1">
                            <label class="block text-sm font-bold text-gray-700">Item</label>
                        </div>
                        <input type="text" name="item" required placeholder="Enter item name or description"
                            class="w-full p-3 text-sm border border-gray-200 rounded bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300">
                    </div>

                    <div class="space-y-2">
                        <div class="mb-1">
                            <label class="block text-sm font-bold text-gray-700">Category</label>
                        </div>
                        <select name="category" required
                            class="w-full p-3 text-sm border border-gray-200 rounded bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300">
                            <option value="" disabled selected>Choose a category</option>
                            {% for category in categories %}
                            <option value="{{ category }}">{{ category }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="space-y-2">
                        <div class="mb-1">
                            <label class="block text-sm font-bold text-gray-700">Amount</label>
                        </div>
                        <input type="number" name="amount" required placeholder="Enter numeric amount"
                            class="w-full p-3 text-sm border border-gray-200 rounded bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-300">
                    </div>

                    <button type="submit"
                        class="mt-2 w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-3 px-6 rounded-md font-medium hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                        Simpan
                    </button>
                </form>
            </div>
        </div>
        <div class="w-full md:w-2/3 space-y-6">
            <div class="bg-white rounded-t-3xl md:rounded-lg">
                <div class="space-y-6 p-6">

                    <div class="text-center md:text-left space-y-2">
                        <h2 class="text-xl font-medium text-gray-800 capitalize">{{tipe}} Report </h2>
                        <p class="text-gray-500 text-sm">View your monthly {{tipe}} report.</p>
                    </div>

                    <div class="overflow-x-auto w-full py-4">
                        <table id="records-table"
                            class="table-auto w-full text-sm whitespace-nowrap divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr class="bg-gray-50">
                                    <th
                                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        No
                                    </th>
                                    <th
                                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Item</th>
                                    <th
                                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Category</th>
                                    <th
                                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Amount
                                    </th>
                                    <th
                                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Date</th>
                                    <th
                                        class="px-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                {% if records %}
                                {% for row in records %}
                                <tr class="odd:bg-white even:bg-gray-50 hover:bg-gray-100 text-sm">
                                    <td class="px-3 py-2 whitespace-nowrap text-gray-900">{{ loop.index }}</td>
                                    <td class="px-3 py-2 capitalize whitespace-nowrap">{{ row[1] }}</td>
                                    <td class="px-3 py-2 capitalize whitespace-nowrap">{{ row[2] }}</td>
                                    <td class="px-3 py-2 whitespace-nowrap">{{ row[3]|format_rupiah }}</td>
                                    <td class="px-3 py-2 whitespace-nowrap">{{ row[0]|format_date }}</td>
                                    <td class="px-3 py-2">
                                        <div class="flex items-center space-x-2">
                                            <button class="edit-btn cursor-pointer
                                            hover:text-blue-800 active:text-blue-900
                                            font-medium text-sm
                                            transition-all duration-200 ease-in-out
                                            hover:underline hover:underline-offset-2">Edit
                                            </button>
                                            <!-- Separator -->
                                            <span class="text-gray-300">|</span>
                                            <button class="delete-product cursor-pointer
                                            text-red-600 hover:text-red-800 active:text-red-900
                                            font-medium text-sm
                                            py-1
                                            transition-all duration-200 ease-in-out
                                            hover:underline hover:underline-offset-2">Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="4">Belum ada data</td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>


                </div>
            </div>
        </div>
    </div>

</section>

<script>
    $(document).ready(function () {
        $('#records-table').DataTable({
            responsive: {
                details: { type: 'column', target: 'tr' }
            },
            paging: false,           // Disable pagination
            lengthChange: false,     // Hide "Show entries"
            language: {
                search: "Search:",
                info: "Showing _TOTAL_ entries",
                zeroRecords: "No records found"
            },
            columnDefs: [{
                targets: 0,
                searchable: false,
                orderable: false,
                render: (data, type, row, meta) => meta.row + 1,
                className: "px-2 py-1"
            },
            { targets: '_all', className: "px-2 py-1" }
            ],
            dom:
                // Only search bar on top, and info on bottom
                '<"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-4 mb-4"f>' +
                'rt' +
                '<"text-sm text-gray-600 mt-4"i>',
            initComplete: function () {
                $('.dataTables_filter label').addClass('text-sm font-medium text-gray-700');
                $('.dataTables_filter input').addClass('ml-2 px-3 py-2 border border-gray-300 rounded text-sm');
                $('.dataTables_info').addClass('text-sm text-gray-600 mt-2');
            }
        });
    });
</script>



{% endblock %}